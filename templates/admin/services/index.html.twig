{% extends 'admin/base_table_admilte.html.twig' %}
{% block card_header_title %}
    Liste des services
{% endblock %}

 {% block btntitle %}
     {% trans %} Ajouter un service{% endtrans %}
 {% endblock %}
{% block btnapath %} {{ path('admin_services_new') }} {% endblock %}
{% block tablecontent %}


    <thead>
    <tr>
        <th>Image</th>
        <th>Services</th>
        <th></th>
        <th>actions</th>
    </tr>
    </thead>

    <tbody>
    {% for service in services %}
        <tr>
            <td>
                <img src="{{ service.ImageService }}" alt="Product Image" class="img-size-50">
            </td>
            <td>{{ service.libelle }}</td>
            <td>
                    {% if service.featured == true %}
                <a href="{{ path('admin_services_mise_en_avant',{'codeService':service.codeService}) }}" class="js-retrait">

                <i class="fas fa-star"></i>
                    {% else %}
                    <a href="{{ path('admin_services_mise_en_avant',{'codeService':service.codeService}) }}" class="js-featured">

                    <i class="far fa-star"></i>
                    {% endif %}
                </a>
            </td>

            <td>
                <a class="btn btn-primary btn-sm"
                   href="{{ path('admin_services_show', {'codeService': service.codeService}) }}">
                    <i class="fas fa-eye">
                    </i>
                </a>
                <a class="btn btn-success btn-sm"
                   href="{{ path('admin_services_edit', {'codeService': service.codeService}) }}">
                    <i class="fas fa-edit">
                    </i>
                </a>
                <a class="btn btn-danger btn-sm" href="#">
                    {#                    fas fa-trash-o #}
                    <i class="fas fa-trash">
                    </i>
                </a>
                {#                    <a href="{{ path('app_services_show', {'codeService': service.codeService}) }}">show</a> #}
                {#                    <a href="{{ path('app_services_edit', {'codeService': service.codeService}) }}">edit</a> #}
            </td>
        </tr>
    {% else %}
        <tr>
            <td colspan="5">no records found</td>
        </tr>
    {% endfor %}
    </tbody>
{% endblock %}

{#    <a href="{{ path('app_services_new') }}">Create new</a> #}

{% block javascript %}
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    function onclickFeatured(event) {
    event.preventDefault();

    const url = this.href;
    var parent = this.closest('tr');

    const icone = parent.querySelector('i')

    axios.get(url).then(function (response) {
    //    console.log(response)
    if (icone.classList.contains('fas')) icone.classList.replace('fas', 'far');
    else icone.classList.replace('far', 'fas');
});
}

    function onclickRetrait(event) {
    event.preventDefault();

    const url = this.href;
    var parent = this.closest('tr');

    const icone = parent.querySelector('i')
    const ac = parent.querySelector('a.js-featured')

    axios.get(url).then(function (response) {
    console.log(response)
    // ac.hidden
    if (icone.classList.contains('fas')) icone.classList.replace('far', 'fas');
    else icone.classList.replace('fas', 'far');
});
}

    document.querySelectorAll('a.js-featured').forEach(function (link) {
    link.addEventListener('click', onclickFeatured);
})
    document.querySelectorAll('a.js-retrait').forEach(function (link) {
    link.addEventListener('click', onclickRetrait);
})
</script>
{% endblock %}
